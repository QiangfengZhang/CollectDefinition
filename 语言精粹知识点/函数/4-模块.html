<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>模块</title>
</head>
<body>
	
</body>
<script>
Function.prototype.method = function(name, func) {
	this.prototype[name] = func;
	return this;
}
// 可以使用函数和闭包来构造模块
// 模块是一个提供接口却隐藏状态与实现的函数或对象
String.method("deentityify", function() {
	// 字符实体表，它映射字符实体的名字到对应的字符
	var entity = {
		quot: '"',
		lt: "<",
		gt: ">"
	};

	// 返回 deentityify 方法
	return function() {
		return this.replace(/&([^&;]+);/g, function(a, b) {
			var r = entity[b];
			return typeof r === 'string' ? r : a;
		})
	};
}())
document.write('&lt;&quot;&gt;'.deentityify());
</script>
</html>